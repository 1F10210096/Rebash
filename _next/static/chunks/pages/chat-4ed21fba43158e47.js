(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[180],{1679:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat",function(){return o(9443)}])},9443:function(e,t,o){"use strict";o.r(t);var s=o(5893),n=o(7547),a=o(7496),l=o(8795),c=o(4969),i=o(5747),r=o(9361),u=o(2524),d=o(388),_=o(6074),m=o(1577),h=o(1794),g=o(6953),x=o(7484),p=o.n(x),y=o(285),b=o.n(y),f=o(24),j=o(1163),k=o(7294),C=o(5371),S=o(1290),v=o(1634),w=o.n(v);p().extend(b());let Z=()=>{let[e]=(0,f.KO)(C.L),[t,o]=(0,k.useState)(""),[x,p]=(0,k.useState)(""),[y,b]=(0,k.useState)([]),[v,Z]=(0,k.useState)(""),[N,B]=(0,k.useState)(""),[E,I]=(0,k.useState)([]),[M,P]=(0,k.useState)([]),[T,O]=(0,k.useState)([]),[R,U]=(0,k.useState)([]);(0,j.useRouter)();let[A,$]=(0,k.useState)(""),F=(0,k.useRef)(null),L=(0,k.useRef)(),[X,V]=(0,k.useState)(!1),[Y,D]=(0,k.useState)(""),[K,q]=(0,k.useState)(""),[z,G]=(0,k.useState)(""),[H,J]=(0,k.useState)("2015/01/05"),[Q,W]=(0,k.useState)([]),[ee,et]=(0,k.useState)(""),[eo,es]=(0,k.useState)(!1),[en,ea]=(0,k.useState)(!1),[el,ec]=(0,k.useState)(!1),{Header:ei,Content:er,Footer:eu,Sider:ed}=i.Z,[e_,em]=(0,k.useState)(!1),[eh,eg]=(0,k.useState)([]),{token:{colorBgContainer:ex}}=r.Z.useToken(),ep=()=>{ec(!0),ek()};(0,k.useEffect)(()=>{let e=async()=>{L.current=await navigator.mediaDevices.getUserMedia({video:!0}),F.current&&(F.current.srcObject=L.current)},t=()=>{L.current&&L.current.getTracks()[0].stop()};return e(),()=>{t()}},[]);let ey=(0,k.useCallback)(async()=>{let e=await S.x.roomlist.$post();console.log(e),b(e.roomId)},[]),eb=(0,k.useCallback)(async()=>{let t=await S.x.roomlist.$post();if(console.log(t),null===t)console.log("a"),await S.x.create.$post();else if(null===e)console.log(e);else{let t=e.id,o=await S.x.usercheck.$post({body:{userId:t}});console.log(o)}},[e]),ef=async()=>{if(o(ee),console.log("User input:",ee),!e)return;let s=e.id,n=await S.x.user.post({body:{roomId:t,userId:s}});await S.x.roomcreate.post({body:{roomId:t,userId:s}}),console.log(t),b(n.body.roomId)},ej=async()=>{if(!e)return;let o=e.id;console.log(Y);let s=await S.x.serchroom.post({body:{searchRoomId:Y,userId:o}});await S.x.userroomcreate.post({body:{searchRoomId:Y,userId:o}}),console.log(s.body.user),console.log(t),p(s.body.roomid),I(s.body.user),await ey()},ek=async()=>{if(!e)return;console.log("234");let t=e.id,o=await S.x.usercheck.$post({body:{userId:t}});void 0===o?console.log("usernasi"):(console.log(o.comment),Z(o.comment),console.log(o.birth),console.log("asdaw"),J(o.birth),console.log(H))},eC=async()=>{if(!e)return;console.log(e.photoURL),console.log(K);let o=e.id,s=e.displayName;void 0===s?console.log("usernameなし"):await S.x.message.post({body:{roomId:t,sender_id:o,content:K,name:s}}),await eS()},eS=async()=>{let o=await S.x.message_get.$post({body:{roomId:t}});void 0===o?console.log("messagesがありません"):(P(o),B((null==e?void 0:e.id)||""))},{TextArea:ev}=u.Z;return(0,k.useEffect)(()=>{eb(),ey()},[ey,eb]),(0,s.jsxs)(i.Z,{hasSider:!0,children:[(0,s.jsx)("div",{style:{width:300,height:120,background:"#02021e"}}),(0,s.jsx)("div",{className:w().box1,onClick:ep}),(0,s.jsx)(d.C,{style:{backgroundColor:"#87d068",right:500,top:40},icon:(0,s.jsx)(n.Z,{})}),(0,s.jsx)("div",{style:{top:800,fontSize:"16px",color:"blue"},children:null==e?void 0:e.displayName}),(0,s.jsx)(s.Fragment,{}),(0,s.jsxs)(i.Z,{className:"site-layout",style:{marginLeft:100},children:[(0,s.jsx)(ei,{style:{padding:0,background:ex}}),(0,s.jsx)(er,{style:{margin:"24px 16px 0",overflow:"initial"},children:(0,s.jsxs)("div",{style:{padding:24,textAlign:"center",background:ex},children:[(0,s.jsx)("p",{children:"long content"}),M.sort((e,t)=>e.sent_at-t.sent_at).map((e,t)=>(0,s.jsxs)(k.Fragment,{children:[0!==t&&(0,s.jsx)(_.Z,{orientation:"left",plain:!0}),(0,s.jsxs)("div",{className:"".concat(w().commentBubble," ").concat(e.sender_Id===N?w().myMessage:w().otherMessage),children:[(0,s.jsx)("div",{className:w().username,children:e.username}),(0,s.jsx)("div",{className:w().content,children:e.contentmess})]})]},e.id2))]})}),(0,s.jsx)(eu,{style:{textAlign:"center"},children:"Ant Design \xa92023 Created by Ant UED"})]}),(0,s.jsx)(m.ZP,{icon:(0,s.jsx)(a.Z,{}),style:{position:"fixed",top:750,right:300},type:"primary",onClick:()=>eC()}),(0,s.jsx)(h.Z,{icon:(0,s.jsx)(l.Z,{}),type:"primary",style:{top:800,left:75}}),(0,s.jsx)(g.Z,{title:(0,s.jsx)(u.Z,{value:t,onChange:e=>o(e.target.value),onPressEnter:ef,placeholder:"RoomIdを入力してください"}),visible:eo,onVisibleChange:e=>es(e),onConfirm:ef,onCancel:()=>es(!1),okText:"Add",cancelText:"Cancel",placement:"left",children:(0,s.jsx)(h.Z,{icon:(0,s.jsx)(c.Z,{}),type:"primary",style:{top:730,left:75}})}),(0,s.jsxs)(g.Z,{title:(0,s.jsx)(u.Z,{value:Y,onChange:e=>D(e.target.value),onPressEnter:ej,placeholder:"RoomIdを入力してください"}),visible:eo,onVisibleChange:e=>ea(e),onConfirm:ej,onCancel:()=>ea(!1),okText:"Search",cancelText:"Cancel",placement:"left",children:[(0,s.jsx)(m.ZP,{icon:(0,s.jsx)(a.Z,{}),style:{position:"fixed",top:750,right:300},type:"primary",onClick:()=>eC()}),(0,s.jsx)(h.Z,{icon:(0,s.jsx)(l.Z,{}),type:"primary",style:{position:"fixed",top:800,left:75}})]})]})};t.default=Z},1634:function(e){e.exports={title:"chat_title__Snu28",tasks:"chat_tasks__0B7ZY",deleteBtn:"chat_deleteBtn__3eXIO",roomIds:"chat_roomIds____AqH",comment:"chat_comment__F8UVK",form:"chat_form__tjMP8",myMessage:"chat_myMessage__hdJnJ",otherMessage:"chat_otherMessage__yyNOl",commentBubble:"chat_commentBubble__X6BbX",currentroomId:"chat_currentroomId__xyHNh",roomContainer:"chat_roomContainer__5bt_8",commentContainer:"chat_commentContainer__IkVN_",username:"chat_username__YaPG7",messageContent:"chat_messageContent__6gZBg",toggleButton:"chat_toggleButton__LMmYY",crateButton:"chat_crateButton__rz1Ob",editForm:"chat_editForm__klhxE",content:"chat_content__emhRU",haikei:"chat_haikei__vMgnL",box1:"chat_box1__Uqnsp",demo:"chat_demo__ii8nG",aside:"chat_aside__gK_Pr"}}},function(e){e.O(0,[933,774,888,179],function(){return e(e.s=1679)}),_N_E=e.O()}]);