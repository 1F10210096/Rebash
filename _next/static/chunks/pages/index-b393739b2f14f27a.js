(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{9208:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return o(9178)}])},9178:function(e,t,o){"use strict";o.r(t);var n=o(5893),s=o(8641),i=o(1156),a=o(2952),l=o(7496),r=o(8795),c=o(4969),u=o(7183),d=o(9361),x=o(8180),m=o(6074),p=o(9569),_=o(1577),g=o(628),y=o(1676),h=o(5409),f=o(24),j=o(1163),b=o(7294),S=o(5371),v=o(1290),Z=o(2729),w=o.n(Z);let C=()=>{let[e]=(0,f.KO)(S.L),[t,o]=(0,b.useState)(""),[Z,C]=(0,b.useState)(""),[k,O]=(0,b.useState)([]),[N,E]=(0,b.useState)(""),[I,T]=(0,b.useState)(""),[B,M]=(0,b.useState)([]),[U,P]=(0,b.useState)([]),[A,R]=(0,b.useState)([]),[F,$]=(0,b.useState)([]);(0,j.useRouter)();let[D,J]=(0,b.useState)(""),L=(0,b.useRef)(null),Q=(0,b.useRef)(),[X,q]=(0,b.useState)(!1),[K,V]=(0,b.useState)(""),[z,G]=(0,b.useState)(""),[H,W]=(0,b.useState)(""),[Y,ee]=(0,b.useState)(null),[et,eo]=(0,b.useState)(""),[en,es]=(0,b.useState)(!1),[ei,ea]=(0,b.useState)(!1),[el,er]=(0,b.useState)(null),[ec,eu]=(0,b.useState)({x:0,y:0}),[ed,ex]=(0,b.useState)(""),[em,ep]=(0,b.useState)(""),[e_,eg]=(0,b.useState)([]),[ey,eh]=(0,b.useState)(""),[ef,ej]=(0,b.useState)(!1),[eb,eS]=(0,b.useState)(!1),{Header:ev,Content:eZ,Footer:ew,Sider:eC}=u.Z;function ek(e,t,o,n,s){return{key:t,icon:o,children:n,label:e,type:s}}let eO=[ek("Navigation One","sub1",(0,n.jsx)(s.Z,{}),[ek("Item 1","g1",null,[ek("Option 1","1"),ek("Option 2","2")],"group"),ek("Item 2","g2",null,[ek("Option 3","3"),ek("Option 4","4")],"group")]),ek("Navigation Two","sub2",(0,n.jsx)(i.Z,{}),[ek("Option 5","5"),ek("Option 6","6"),ek("Submenu","sub3",null,[ek("Option 7","7"),ek("Option 8","8")])]),{type:"divider"},ek("Navigation Three","sub4",(0,n.jsx)(a.Z,{}),[ek("Option 9","9"),ek("Option 10","10"),ek("Option 11","11"),ek("Option 12","12")]),ek("Group","grp",null,k.map((e,t)=>ek(e,"group-".concat(t))),"group")],eN=e=>{console.log("onSelect",e)},eE=e=>{ex(e)},{token:{colorBgContainer:eI}}=d.Z.useToken();(0,b.useEffect)(()=>{let e=async()=>{Q.current=await navigator.mediaDevices.getUserMedia({video:!0}),L.current&&(L.current.srcObject=Q.current)},t=()=>{Q.current&&Q.current.getTracks()[0].stop()};return e(),()=>{t()}},[]);let eT=(0,b.useCallback)(async()=>{let e=await v.x.roomlist.$post();console.log(e),O(e.roomId)},[]),eB=(0,b.useCallback)(async()=>{let t=await v.x.roomlist.$post();if(console.log(t),null===t)console.log("a"),await v.x.create.$post();else if(null===e)console.log(e);else{let t=e.id,o=await v.x.usercheck.$post({body:{userId:t}});console.log(o)}},[e]),eM=async()=>{if(o(ey),console.log("User input:",ey),!e)return;let n=e.id,s=await v.x.user.post({body:{roomId:t,userId:n}});await v.x.roomcreate.post({body:{roomId:t,userId:n}}),console.log(t),O(s.body.roomId)},eU=async()=>{if(!e)return;let o=e.id;console.log(K);let n=await v.x.serchroom.post({body:{searchRoomId:K,userId:o}});await v.x.userroomcreate.post({body:{searchRoomId:K,userId:o}}),console.log(n.body.user),console.log(t),C(n.body.roomid),M(n.body.user),await eT()},eP=async()=>{if(!e)return;console.log(ed);let o=e.id,n=e.displayName;void 0===n?console.log("usernameなし"):await v.x.message.post({body:{roomId:t,sender_id:o,content:ed,name:n}}),await eA()},eA=async()=>{let o=await v.x.message_get.$post({body:{roomId:t}});void 0===o?console.log("messagesがありません"):(P(o),T((null==e?void 0:e.id)||""))};return(0,b.useEffect)(()=>{eB(),eT()},[eT,eB]),(0,n.jsxs)(u.Z,{hasSider:!0,children:[(0,n.jsxs)("p",{children:["User: ",null==e?void 0:e.id]}),(0,n.jsxs)(eC,{style:{overflow:"auto",height:"100vh",position:"fixed",left:0,top:0,bottom:0},children:[(0,n.jsx)("div",{className:"demo-logo-vertical"}),(0,n.jsx)(x.Z,{theme:"dark",mode:"inline",defaultSelectedKeys:["4"],items:eO})]}),(0,n.jsxs)(u.Z,{className:"site-layout",style:{marginLeft:200},children:[(0,n.jsx)(ev,{style:{padding:0,background:eI}}),(0,n.jsx)(eZ,{style:{margin:"24px 16px 0",overflow:"initial"},children:(0,n.jsxs)("div",{style:{padding:24,textAlign:"center",background:eI},children:[(0,n.jsx)("p",{children:"long content"}),U.sort((e,t)=>e.sent_at-t.sent_at).map((e,t)=>(0,n.jsxs)(b.Fragment,{children:[0!==t&&(0,n.jsx)(m.Z,{orientation:"left",plain:!0}),(0,n.jsxs)("div",{className:"".concat(w().commentBubble," ").concat(e.sender_Id===I?w().myMessage:w().otherMessage),children:[(0,n.jsx)("div",{className:w().username,children:e.username}),(0,n.jsx)("div",{className:w().content,children:e.contentmess})]})]},e.id2))]})}),(0,n.jsx)(ew,{style:{textAlign:"center"},children:"Ant Design \xa92023 Created by Ant UED"})]}),(0,n.jsxs)("div",{style:{position:"relative"},children:[(0,n.jsx)(p.Z,{style:{position:"fixed",width:800,height:600,top:750,right:330},onSelect:eN,onSearch:eE,placeholder:"input here"}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{})]}),(0,n.jsx)(_.ZP,{icon:(0,n.jsx)(l.Z,{}),style:{position:"fixed",top:750,right:300},type:"primary",onClick:()=>eP()}),(0,n.jsx)(g.Z,{icon:(0,n.jsx)(r.Z,{}),type:"primary",style:{top:800,left:75}}),(0,n.jsx)(y.Z,{title:(0,n.jsx)(h.Z,{value:t,onChange:e=>o(e.target.value),onPressEnter:eM,placeholder:"RoomIdを入力してください"}),visible:ef,onVisibleChange:e=>ej(e),onConfirm:eM,onCancel:()=>ej(!1),okText:"Add",cancelText:"Cancel",placement:"left",children:(0,n.jsx)(g.Z,{icon:(0,n.jsx)(c.Z,{}),type:"primary",style:{top:730,left:75}})}),(0,n.jsxs)(y.Z,{title:(0,n.jsx)(h.Z,{value:K,onChange:e=>V(e.target.value),onPressEnter:eU,placeholder:"RoomIdを入力してください"}),visible:ef,onVisibleChange:e=>eS(e),onConfirm:eU,onCancel:()=>eS(!1),okText:"Search",cancelText:"Cancel",placement:"left",children:[(0,n.jsx)(_.ZP,{icon:(0,n.jsx)(l.Z,{}),style:{position:"fixed",top:750,right:300},type:"primary",onClick:()=>eP()}),(0,n.jsx)(g.Z,{icon:(0,n.jsx)(r.Z,{}),type:"primary",style:{position:"fixed",top:800,left:75}})]})]})};t.default=C},2729:function(e){e.exports={title:"index_title__gEapU",tasks:"index_tasks__T3_J7",deleteBtn:"index_deleteBtn__DU3nM",roomIds:"index_roomIds__mF8xa",comment:"index_comment__q78Pf",form:"index_form__Hw_Cf",myMessage:"index_myMessage__66zcM",otherMessage:"index_otherMessage__dfNSA",commentBubble:"index_commentBubble__ZShOc",currentroomId:"index_currentroomId__0SJgo",roomContainer:"index_roomContainer__2kFkE",commentContainer:"index_commentContainer__OLZg8",username:"index_username__QQaBM",messageContent:"index_messageContent__X0ZUZ",toggleButton:"index_toggleButton__gIdcp",crateButton:"index_crateButton__6qcJ8",editForm:"index_editForm__nUZR4",content:"index_content__JQhaT"}}},function(e){e.O(0,[9,809,774,888,179],function(){return e(e.s=9208)}),_N_E=e.O()}]);