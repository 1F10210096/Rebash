(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[180],{1679:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat",function(){return s(971)}])},971:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return A}});var a=s(5893),n=s(6695),o=s(7582),i=(0,o.pi)((0,o.pi)((0,o.pi)({},{BLACK:"#111418",DARK_GRAY1:"#1C2127",DARK_GRAY2:"#252A31",DARK_GRAY3:"#2F343C",DARK_GRAY4:"#383E47",DARK_GRAY5:"#404854",GRAY1:"#5F6B7C",GRAY2:"#738091",GRAY3:"#8F99A8",GRAY4:"#ABB3BF",GRAY5:"#C5CBD3",LIGHT_GRAY1:"#D3D8DE",LIGHT_GRAY2:"#DCE0E5",LIGHT_GRAY3:"#E5E8EB",LIGHT_GRAY4:"#EDEFF2",LIGHT_GRAY5:"#F6F7F9",WHITE:"#FFFFFF"}),{BLUE1:"#184A90",BLUE2:"#215DB0",BLUE3:"#2D72D2",BLUE4:"#4C90F0",BLUE5:"#8ABBFF",GREEN1:"#165A36",GREEN2:"#1C6E42",GREEN3:"#238551",GREEN4:"#32A467",GREEN5:"#72CA9B",ORANGE1:"#77450D",ORANGE2:"#935610",ORANGE3:"#C87619",ORANGE4:"#EC9A3C",ORANGE5:"#FBB360",RED1:"#8E292C",RED2:"#AC2F33",RED3:"#CD4246",RED4:"#E76A6E",RED5:"#FA999C"}),{CERULEAN1:"#0C5174",CERULEAN2:"#0F6894",CERULEAN3:"#147EB3",CERULEAN4:"#3FA6DA",CERULEAN5:"#68C1EE",FOREST1:"#1D7324",FOREST2:"#238C2C",FOREST3:"#29A634",FOREST4:"#43BF4D",FOREST5:"#62D96B",GOLD1:"#5C4405",GOLD2:"#866103",GOLD3:"#D1980B",GOLD4:"#F0B726",GOLD5:"#FBD065",INDIGO1:"#5642A6",INDIGO2:"#634DBF",INDIGO3:"#7961DB",INDIGO4:"#9881F3",INDIGO5:"#BDADFF",LIME1:"#43501B",LIME2:"#5A701A",LIME3:"#8EB125",LIME4:"#B6D94C",LIME5:"#D4F17E",ROSE1:"#A82255",ROSE2:"#C22762",ROSE3:"#DB2C6F",ROSE4:"#F5498B",ROSE5:"#FF66A1",SEPIA1:"#5E4123",SEPIA2:"#7A542E",SEPIA3:"#946638",SEPIA4:"#AF855A",SEPIA5:"#D0B090",TURQUOISE1:"#004D46",TURQUOISE2:"#007067",TURQUOISE3:"#00A396",TURQUOISE4:"#13C9BA",TURQUOISE5:"#7AE1D8",VERMILION1:"#96290D",VERMILION2:"#B83211",VERMILION3:"#D33D17",VERMILION4:"#EB6847",VERMILION5:"#FF9980",VIOLET1:"#5C255C",VIOLET2:"#7C327C",VIOLET3:"#9D3F9D",VIOLET4:"#BD6BBD",VIOLET5:"#D69FD6"}),l=s(24),r=s(1163),c=s(7294),d=s(8239);let u=e=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:e.size,height:e.size,fill:e.fill,children:(0,a.jsx)("path",{d:"M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm7.753 18.305c-.261-.586-.789-.991-1.871-1.241-2.293-.529-4.428-.993-3.393-2.945 3.145-5.942.833-9.119-2.489-9.119-3.388 0-5.644 3.299-2.489 9.119 1.066 1.964-1.148 2.427-3.393 2.945-1.084.25-1.608.658-1.867 1.246-1.405-1.723-2.251-3.919-2.251-6.31 0-5.514 4.486-10 10-10s10 4.486 10 10c0 2.389-.845 4.583-2.247 6.305z"})});var _=s(1733),m=s(7251),E=s(2038),h=s.n(E);let x=e=>{let{user:t}=e,s=async()=>{confirm("Logout?")&&await (0,m.k)()};return(0,a.jsx)("div",{className:h().container,children:(0,a.jsxs)("div",{className:h().main,children:[(0,a.jsx)("img",{src:_.D.frourio_svg,height:36,alt:"frourio logo"}),(0,a.jsxs)("div",{className:h().userBtn,onClick:s,children:[void 0!==t.photoURL?(0,a.jsx)("img",{className:h().userIcon,src:t.photoURL,height:24,alt:t.displayName}):(0,a.jsx)(u,{size:18,fill:"#555"}),(0,a.jsx)("span",{className:h().userName,children:t.displayName})]})]})})};var g=s(1290),p=s(5371),I=s(1634),R=s.n(I);let D=()=>{let[e]=(0,l.KO)(p.L),[t,s]=(0,c.useState)(""),[o,u]=(0,c.useState)(""),[_,m]=(0,c.useState)([]),[E,h]=(0,c.useState)(""),[I,D]=(0,c.useState)(""),[A,y]=(0,c.useState)([]),[B,C]=(0,c.useState)([]),[v,N]=(0,c.useState)([]),[j,f]=(0,c.useState)([]);(0,r.useRouter)();let[F,b]=(0,c.useState)(""),S=(0,c.useRef)(null),O=(0,c.useRef)(),[L,G]=(0,c.useState)(!1),[w,T]=(0,c.useState)(""),[k,M]=(0,c.useState)(""),[U,Y]=(0,c.useState)(""),[H,V]=(0,c.useState)(null),[K,P]=(0,c.useState)(""),[$,z]=(0,c.useState)(!1),[Q,X]=(0,c.useState)(!1),[J,Z]=(0,c.useState)(null),[W,q]=(0,c.useState)({x:0,y:0});(0,c.useEffect)(()=>{let e=async()=>{O.current=await navigator.mediaDevices.getUserMedia({video:!0}),S.current&&(S.current.srcObject=O.current)},t=()=>{O.current&&O.current.getTracks()[0].stop()};return e(),()=>{t()}},[]);let ee=(0,c.useCallback)(async()=>{let e=await g.x.roomlist.$post();console.log(e),m(e.roomId)},[]),et=(0,c.useCallback)(async()=>{let t=await g.x.roomlist.$post();if(console.log(t),null===t)console.log("a"),await g.x.create.$post();else if(null===e)console.log(e);else{let t=e.id,s=await g.x.usercheck.$post({body:{userId:t}});console.log(s)}},[e]),es=e=>{s(e.target.value)},ea=e=>{T(e.target.value)},en=e=>{h(e.target.value)},eo=async s=>{if(s.preventDefault(),console.log("a"),!e)return;let a=e.id,n=await g.x.user.post({body:{roomId:t,userId:a}});await g.x.roomcreate.post({body:{roomId:t,userId:a}}),console.log(t),m(n.body.roomId)},ei=async s=>{if(s.preventDefault(),!e)return;let a=e.id;console.log(w);let n=await g.x.serchroom.post({body:{searchRoomId:w,userId:a}});await g.x.userroomcreate.post({body:{searchRoomId:w,userId:a}}),console.log(n.body.user),console.log(t),u(n.body.roomid),y(n.body.user),await ee()},el=async s=>{if(s.preventDefault(),!e)return;let a=e.id,n=e.displayName;void 0===n?console.log("usernameなし"):await g.x.message.post({body:{roomId:t,sender_id:a,content:E,name:n}}),await ec()},er=async t=>{if(s(t),await g.x.room.post({body:{roomId3:t}}),null===e)console.log("error");else{let s=e.id;console.log(s);let a=await g.x.roomuser.post({body:{roomId3:t}});console.log(a.body.user),y(a.body.user)}let a=await g.x.message_get2.$post({body:{roomId3:t}});console.log(a),void 0===a?console.log("messagesがありません"):(C(a),D((null==e?void 0:e.id)||""))},ec=async()=>{let s=await g.x.message_get.$post({body:{roomId:t}});void 0===s?console.log("messagesがありません"):(C(s),D((null==e?void 0:e.id)||""))},ed=async e=>{try{let t=await g.x.infomessage.$post({body:{messageId:e}});Y(t.sender_Id),await ec()}catch(e){await ec()}},eu=async e=>{try{await g.x.deleteMessage.$post({body:{messageId:e}}),await ec()}catch(e){await ec()}},e_=()=>{G(!L)},em=(e,t)=>{V(e),P(t),z(!1),X(!0),M(t)},eE=async()=>{X(!1),null===H&&console.log("id2なし"),await g.x.edit.$post({body:{editingMessageId:H,editedMessage:K}}),await ec(),V(null),P("")},eh=(e,t)=>s=>{s.preventDefault(),z(!0),Z(e),q({x:s.clientX,y:s.clientY}),V(e),P(t),M(t)};return((0,c.useEffect)(()=>{et(),ee()},[ee,et]),e)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x,{user:e}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{children:["User: ",e.id]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:R().currentroomId,children:[(0,a.jsxs)("p",{children:["現在のRoom ID: ",t]}),(0,a.jsx)("p",{children:A})]}),(0,a.jsxs)("div",{className:R().roomIds,children:[(0,a.jsx)("p",{children:"Room IDs:"}),_.map(e=>(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("p",{onClick:()=>er(e),children:e},e)}))]}),(0,a.jsx)("div",{})]})]}),(0,a.jsx)("div",{className:R().comment,children:B.sort((e,t)=>e.sent_at-t.sent_at).map(e=>(0,a.jsxs)("div",{className:"".concat(R().commentBubble," ").concat(e.sender_Id===I?R().myMessage:R().otherMessage),onContextMenu:eh(e.id2,e.contentmess),children:[(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:R().username,children:e.sender_Id===I?null:e.username}),(0,a.jsx)("div",{className:R().username,children:e.sender_Id===I?e.username:null})]}),$&&J===e.id2&&(0,a.jsxs)("div",{className:R().contextMenu,style:{top:W.y,left:W.x},children:[(0,a.jsx)("div",{onClick:()=>em(e.id2,e.contentmess),children:"Edit"}),(0,a.jsx)("div",{onClick:()=>eu(e.id2),children:"Delete"}),(0,a.jsx)("div",{onClick:()=>ed(e.id2),children:"info"})]}),!0===Q&&H===e.id2?(0,a.jsxs)("div",{className:R().editForm,children:[(0,a.jsx)("input",{type:"text",value:k,onChange:t=>em(e.id2,t.target.value)}),(0,a.jsx)("button",{onClick:()=>eE(),children:"Save"}),(0,a.jsx)("button",{onClick:()=>V(null),children:"Cancel"})]}):(0,a.jsx)("div",{children:e.contentmess})]},e.id2))}),(0,a.jsx)("div",{className:R().form,children:(0,a.jsxs)("form",{style:{marginLeft:"700px"},onSubmit:el,children:[(0,a.jsx)("input",{value:E,type:"text",onChange:en}),(0,a.jsx)("input",{type:"submit",value:"  createcomment  "})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{className:R().btn_25,onClick:e_,style:{marginLeft:"100px"},children:"Toggle Form"}),(0,a.jsx)("div",{className:R().crateButton,children:L&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("form",{style:{textAlign:"left",marginTop:"50px"},onSubmit:eo,children:[(0,a.jsx)("input",{value:t,type:"text",onChange:es,placeholder:"Room ID"}),(0,a.jsx)("input",{type:"submit",value:"Create"})]}),(0,a.jsxs)("form",{style:{textAlign:"left",marginTop:"50px"},onSubmit:ei,children:[(0,a.jsx)("input",{value:w,type:"text",onChange:ea,placeholder:"Search Room ID"}),(0,a.jsx)("input",{type:"submit",value:"Search"})]})]})})]}),(0,a.jsx)(n.I,{icon:"paragraph",size:500,style:{color:i.GREEN1,background:i.WHITE}}),(0,a.jsx)(n.I,{icon:"lock",size:500})]}):(0,a.jsx)(d.g,{visible:!0})};var A=D},7251:function(e,t,s){"use strict";s.d(t,{_:function(){return i},k:function(){return l}});var a=s(6467),n=s(328),o=s(3377);let i=async()=>{let e=new a.GH;e.addScope("read:user"),await (0,a.rh)((0,n.l)(),e).catch(o.F)},l=async()=>{await (0,n.l)().signOut()}},2038:function(e){e.exports={container:"BasicHeader_container__5rTZS",main:"BasicHeader_main__yd6De",userBtn:"BasicHeader_userBtn__B7CLf",userIcon:"BasicHeader_userIcon__fjiOn",userName:"BasicHeader_userName__vjAjN"}},1634:function(e){e.exports={title:"chat_title__Snu28",tasks:"chat_tasks__0B7ZY",deleteBtn:"chat_deleteBtn__3eXIO",roomIds:"chat_roomIds____AqH",comment:"chat_comment__F8UVK",form:"chat_form__tjMP8",myMessage:"chat_myMessage__hdJnJ",otherMessage:"chat_otherMessage__yyNOl",commentBubble:"chat_commentBubble__X6BbX",currentroomId:"chat_currentroomId__xyHNh",roomContainer:"chat_roomContainer__5bt_8",commentContainer:"chat_commentContainer__IkVN_",username:"chat_username__YaPG7",messageContent:"chat_messageContent__6gZBg",toggleButton:"chat_toggleButton__LMmYY",crateButton:"chat_crateButton__rz1Ob",btn_25:"chat_btn_25__t6LT5",contextMenu:"chat_contextMenu__naRy_",before:"chat_before__vS88Q",after:"chat_after__lKsmN",btn:"chat_btn__FJky3","btn-gradient":"chat_btn-gradient__JTNI2",editForm:"chat_editForm__klhxE"}}},function(e){e.O(0,[695,774,888,179],function(){return e(e.s=1679)}),_N_E=e.O()}]);