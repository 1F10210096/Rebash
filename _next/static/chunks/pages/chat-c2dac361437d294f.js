(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[180],{1679:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat",function(){return o(9443)}])},9443:function(e,t,o){"use strict";o.r(t);var s=o(5893),n=o(4969),a=o(7547),l=o(7496),c=o(8795),i=o(5747),r=o(9361),u=o(2524),d=o(388),_=o(6074),m=o(1577),h=o(1794),g=o(6953),x=o(7484),p=o.n(x),y=o(285),b=o.n(y),f=o(24),j=o(1163),S=o(7294),k=o(5371),C=o(1290),v=o(1634),Z=o.n(v);p().extend(b());let w=()=>{let[e]=(0,f.KO)(k.L),[t,o]=(0,S.useState)(""),[x,p]=(0,S.useState)(""),[y,b]=(0,S.useState)([]),[v,w]=(0,S.useState)(""),[N,B]=(0,S.useState)(""),[E,I]=(0,S.useState)([]),[M,P]=(0,S.useState)([]),[T,O]=(0,S.useState)([]),[R,U]=(0,S.useState)([]);(0,j.useRouter)();let[A,$]=(0,S.useState)(""),F=(0,S.useRef)(null),L=(0,S.useRef)(),[X,V]=(0,S.useState)(!1),[Y,D]=(0,S.useState)(""),[K,q]=(0,S.useState)(""),[z,G]=(0,S.useState)(""),[H,J]=(0,S.useState)(null),[Q,W]=(0,S.useState)(""),[ee,et]=(0,S.useState)(!1),[eo,es]=(0,S.useState)(!1),[en,ea]=(0,S.useState)(null),[el,ec]=(0,S.useState)({x:0,y:0}),[ei,er]=(0,S.useState)(""),[eu,ed]=(0,S.useState)(""),[e_,em]=(0,S.useState)("2015/01/05"),[eh,eg]=(0,S.useState)([]),[ex,ep]=(0,S.useState)(""),[ey,eb]=(0,S.useState)(!1),[ef,ej]=(0,S.useState)(!1),[eS,ek]=(0,S.useState)(!1),{Header:eC,Content:ev,Footer:eZ,Sider:ew}=i.Z,[eN,eB]=(0,S.useState)(!1),[eE,eI]=(0,S.useState)([]);n.Z;let{token:{colorBgContainer:eM}}=r.Z.useToken(),eP=()=>{ek(!0),eA()};(0,S.useEffect)(()=>{let e=async()=>{L.current=await navigator.mediaDevices.getUserMedia({video:!0}),F.current&&(F.current.srcObject=L.current)},t=()=>{L.current&&L.current.getTracks()[0].stop()};return e(),()=>{t()}},[]);let eT=(0,S.useCallback)(async()=>{let e=await C.x.roomlist.$post();console.log(e),b(e.roomId)},[]),eO=(0,S.useCallback)(async()=>{let t=await C.x.roomlist.$post();if(console.log(t),null===t)console.log("a"),await C.x.create.$post();else if(null===e)console.log(e);else{let t=e.id,o=await C.x.usercheck.$post({body:{userId:t}});console.log(o)}},[e]),eR=async()=>{if(o(ex),console.log("User input:",ex),!e)return;let s=e.id,n=await C.x.user.post({body:{roomId:t,userId:s}});await C.x.roomcreate.post({body:{roomId:t,userId:s}}),console.log(t),b(n.body.roomId)},eU=async()=>{if(!e)return;let o=e.id;console.log(Y);let s=await C.x.serchroom.post({body:{searchRoomId:Y,userId:o}});await C.x.userroomcreate.post({body:{searchRoomId:Y,userId:o}}),console.log(s.body.user),console.log(t),p(s.body.roomid),I(s.body.user),await eT()},eA=async()=>{if(!e)return;console.log("234");let t=e.id,o=await C.x.usercheck.$post({body:{userId:t}});void 0===o?console.log("usernasi"):(console.log(o.comment),w(o.comment),console.log(o.birth),console.log("asdaw"),em(o.birth),console.log(e_))},e$=async()=>{if(!e)return;console.log(e.photoURL),console.log(ei);let o=e.id,s=e.displayName;void 0===s?console.log("usernameなし"):await C.x.message.post({body:{roomId:t,sender_id:o,content:ei,name:s}}),await eF()},eF=async()=>{let o=await C.x.message_get.$post({body:{roomId:t}});void 0===o?console.log("messagesがありません"):(P(o),B((null==e?void 0:e.id)||""))},{TextArea:eL}=u.Z;return(0,S.useEffect)(()=>{eO(),eT()},[eT,eO]),(0,s.jsxs)(i.Z,{hasSider:!0,children:[(0,s.jsx)("div",{style:{width:300,height:120,background:"#02021e"}}),(0,s.jsx)("div",{className:Z().box1,onClick:eP}),(0,s.jsx)(d.C,{style:{backgroundColor:"#87d068",right:500,top:40},icon:(0,s.jsx)(a.Z,{})}),(0,s.jsx)("div",{style:{top:800,fontSize:"16px",color:"blue"},children:null==e?void 0:e.displayName}),(0,s.jsx)(s.Fragment,{}),(0,s.jsxs)(i.Z,{className:"site-layout",style:{marginLeft:100},children:[(0,s.jsx)(eC,{style:{padding:0,background:eM}}),(0,s.jsx)(ev,{style:{margin:"24px 16px 0",overflow:"initial"},children:(0,s.jsxs)("div",{style:{padding:24,textAlign:"center",background:eM},children:[(0,s.jsx)("p",{children:"long content"}),M.sort((e,t)=>e.sent_at-t.sent_at).map((e,t)=>(0,s.jsxs)(S.Fragment,{children:[0!==t&&(0,s.jsx)(_.Z,{orientation:"left",plain:!0}),(0,s.jsxs)("div",{className:"".concat(Z().commentBubble," ").concat(e.sender_Id===N?Z().myMessage:Z().otherMessage),children:[(0,s.jsx)("div",{className:Z().username,children:e.username}),(0,s.jsx)("div",{className:Z().content,children:e.contentmess})]})]},e.id2))]})}),(0,s.jsx)(eZ,{style:{textAlign:"center"},children:"Ant Design \xa92023 Created by Ant UED"})]}),(0,s.jsx)(m.ZP,{icon:(0,s.jsx)(l.Z,{}),style:{position:"fixed",top:750,right:300},type:"primary",onClick:()=>e$()}),(0,s.jsx)(h.Z,{icon:(0,s.jsx)(c.Z,{}),type:"primary",style:{top:800,left:75}}),(0,s.jsx)(g.Z,{title:(0,s.jsx)(u.Z,{value:t,onChange:e=>o(e.target.value),onPressEnter:eR,placeholder:"RoomIdを入力してください"}),visible:ey,onVisibleChange:e=>eb(e),onConfirm:eR,onCancel:()=>eb(!1),okText:"Add",cancelText:"Cancel",placement:"left",children:(0,s.jsx)(h.Z,{icon:(0,s.jsx)(n.Z,{}),type:"primary",style:{top:730,left:75}})}),(0,s.jsxs)(g.Z,{title:(0,s.jsx)(u.Z,{value:Y,onChange:e=>D(e.target.value),onPressEnter:eU,placeholder:"RoomIdを入力してください"}),visible:ey,onVisibleChange:e=>ej(e),onConfirm:eU,onCancel:()=>ej(!1),okText:"Search",cancelText:"Cancel",placement:"left",children:[(0,s.jsx)(m.ZP,{icon:(0,s.jsx)(l.Z,{}),style:{position:"fixed",top:750,right:300},type:"primary",onClick:()=>e$()}),(0,s.jsx)(h.Z,{icon:(0,s.jsx)(c.Z,{}),type:"primary",style:{position:"fixed",top:800,left:75}})]})]})};t.default=w},1634:function(e){e.exports={title:"chat_title__Snu28",tasks:"chat_tasks__0B7ZY",deleteBtn:"chat_deleteBtn__3eXIO",roomIds:"chat_roomIds____AqH",comment:"chat_comment__F8UVK",form:"chat_form__tjMP8",myMessage:"chat_myMessage__hdJnJ",otherMessage:"chat_otherMessage__yyNOl",commentBubble:"chat_commentBubble__X6BbX",currentroomId:"chat_currentroomId__xyHNh",roomContainer:"chat_roomContainer__5bt_8",commentContainer:"chat_commentContainer__IkVN_",username:"chat_username__YaPG7",messageContent:"chat_messageContent__6gZBg",toggleButton:"chat_toggleButton__LMmYY",crateButton:"chat_crateButton__rz1Ob",editForm:"chat_editForm__klhxE",content:"chat_content__emhRU",haikei:"chat_haikei__vMgnL",box1:"chat_box1__Uqnsp",demo:"chat_demo__ii8nG",aside:"chat_aside__gK_Pr"}}},function(e){e.O(0,[933,774,888,179],function(){return e(e.s=1679)}),_N_E=e.O()}]);